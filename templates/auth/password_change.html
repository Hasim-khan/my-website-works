{% extends "login/userhomebase.html" %}
{% load static %}
{% block headertitle %}Change Password{% endblock headertitle %}
{% block content %}

<!-- Include FontAwesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<div class="container mx-auto px-4 flex items-center justify-center min-h-screen" style="margin-top: -332px;">
    <div class="bg-white shadow-md rounded-lg p-4 w-full max-w-3xl mx-auto" style="height: 50vh; display: flex; align-items: center;">
        <form action="{% url 'password_change' %}" method="post" class="w-full">
            {% csrf_token %}

            <!-- Old Password Field -->
            <div class="mb-2 relative">
                <label class="block text-gray-700 font-semibold mb-1">Old Password</label>
                <input type="password" name="old_password" id="old_password"
                    class="w-full px-3 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10" required>
                <i class="fa-solid fa-eye absolute right-3 top-8 text-gray-500 cursor-pointer" 
                   onclick="togglePassword('old_password', this)"></i>
            </div>

            <!-- New Password Field -->
            <div class="mb-2 relative">
                <label class="block text-gray-700 font-semibold mb-1">New Password</label>
                <input type="password" name="new_password1" id="new_password1"
                    class="w-full px-3 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10" required>
                <i class="fa-solid fa-eye absolute right-3 top-8 text-gray-500 cursor-pointer" 
                   onclick="togglePassword('new_password1', this)"></i>
            </div>

            <!-- Confirm New Password Field -->
            <div class="mb-2 relative">
                <label class="block text-gray-700 font-semibold mb-1">Confirm New Password</label>
                <input type="password" name="new_password2" id="new_password2"
                    class="w-full px-3 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10" required>
                <i class="fa-solid fa-eye absolute right-3 top-8 text-gray-500 cursor-pointer" 
                   onclick="togglePassword('new_password2', this)"></i>
            </div>

            <!-- Submit Button -->
            <button type="submit" 
                class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 rounded-md transition">
                Change Password
            </button>
        </form>
    </div>
</div>

<!-- JavaScript for Toggle Password Visibility -->
<script>
    function togglePassword(inputId, icon) {
        let inputField = document.getElementById(inputId);
        if (inputField.type === "password") {
            inputField.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash"); // Change icon to 'eye-slash' when visible
        } else {
            inputField.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye"); // Change icon back to 'eye' when hidden
        }
    }
</script>

{% endblock content %}
